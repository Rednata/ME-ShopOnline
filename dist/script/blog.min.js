!function(){"use strict";const e=document.querySelector(".header"),t=document.querySelector("main"),n=e=>e.map((e=>(({title:e,id:t})=>{const n=document.createElement("li");return n.classList.add("blog-item"),n.insertAdjacentHTML("afterbegin",`\n        <a class="blog-item__link" href="article.html?id=${t}" target="_blank">\n\n        <picture>\n          <source srcset="assets/images/Rectangle.avif" type="image/avif">\n          <source srcset="assets/images/Rectangle.webp" type="image/webp">\n          <img class="blog-item__image" src="./assets/images/Rectangle.jpg" alt="">\n        </picture>\n\n          \n        </a> \n        <div class="blog-item__content">\n          <a class="blog-item__link" href="article.html?id=${t}" target="_blank">\n            <h2 class="blog-item__title">${e}</h2>\n          </a>\n\n          <div class="info">\n          <span class="info__date">22 октября 2021, 12:45</span>\n          <div class="info-wrap">\n            <div class="info__view">\n              <span class="info__img info__img_view"></span>\n              <p class="info__count">1.2K</p>              \n            </div>\n            <div class="info__comments">\n              <span class="info__img info__img_comments"></span>\n              <p class="info__count">0</p>              \n            </div>\n          </div>\n          </div>          \n\n        </div>  \n      `),n})(e))),a=(e,t,n)=>{n||=t;const a=e.querySelector(".pagination-group");a.innerHTML="";const s=[];for(let e=n;e<n+3;e++){const n=document.createElement("a");n.className="pagination__page",e===t&&n.classList.add("active"),n.setAttribute("data-number",`${e}`),n.href=`blog.html?page=${e}`,n.textContent=e,s.push(n)}return a.append(...s),a},s=(s,c)=>{const o=(()=>{const e=document.createElement("section");return e.classList.add("section","container"),e})(),i=(()=>{const e=document.createElement("ul");return e.classList.add("blog"),e})();i.append(...n(s.data)),o.append(i);const r=document.createElement("div");r.classList.add("bread"),r.insertAdjacentHTML("afterbegin",'<ul class="nav-breadcrumb">\n          <li class="nav-breadcrumb__li">\n            <a class="nav-breadcrumb__main" href="index.html">Главная</a>\n          </li>\n          <li class="nav-breadcrumb__li">\n            <a class="goBlog" href="blog.html">Блог</a>\n          </li>           \n        </ul>\n      '),e.append(r);const l=(()=>{const e=document.createElement("div");return e.classList.add("pagination"),e.insertAdjacentHTML("afterbegin",'    \n        <a class="arrow arrow_left"></a>\n        <div class="pagination-group">\n        </div>\n        <a class="arrow arrow_right"></a>    \n      '),e})(),d=a(l,c);return o.append(l),t.append(o),{pagination:d}},c=document.createElement("div");c.classList.add("articleWrap","container");const o=e=>+e.firstElementChild.dataset.number,i=(e,t,n,s)=>{a(e,n,"left"===s?t<=1?1:t-1:t+1)},r="https://determined-painted-hawthorn.glitch.me/api",l=(e,t)=>{const n=document.createElement(e);return n.className=t,n},d=e=>{const t=l("li","sublist__item"),n=l("a","sublist__link");return n.textContent=e,t.append(n),n.href=`catalog.html?category=${e}`,t},u=()=>(JSON.parse(localStorage.getItem("cart"))||[]).reduce(((e,t)=>e+Number(t.count)),0)||"",m=async()=>{const e=await(async e=>{const t=await fetch(r+e);return await t.json()})("/category"),t=document.querySelector(".header .sublist_catalog"),n=document.querySelector(".footer .sublist_catalog"),a=e.map((e=>d(e))),s=e.map((e=>d(e)));t.append(...a),n.append(...s)};(async e=>{const t=new URL(window.location).search;e=+t.slice(6)||1;const n=await fetch(`https://gorest.co.in/public-api/posts${t}`),a=await n.json();s(a,e),(e=>{const t=document.querySelector(".pagination"),n=document.querySelector(".pagination-group");t.addEventListener("click",(a=>{if(a.target.closest(".arrow_left")){a.preventDefault();const s=o(n),c=+e.slice(6);i(t,s,c,"left")}if(a.target.closest(".arrow_right")){a.preventDefault();const s=o(n),c=+e.slice(6);i(t,s,c,"right")}}))})(t)})(),(()=>{const e=document.querySelectorAll(".nav__item_catalog .nav__title"),t=document.querySelectorAll(".nav__item_buyer .nav__title"),n=document.querySelectorAll(".sublist_catalog"),a=document.querySelectorAll(".sublist_buyer");e.forEach(((e,t)=>{e.addEventListener("click",(()=>{n[t].classList.toggle("sublist_show")}))})),t.forEach(((e,t)=>{e.addEventListener("click",(()=>{a[t].classList.toggle("sublist_show")}))}))})(),(()=>{const e=document.querySelector(".menu"),t=e.querySelector(".menu__img");e.addEventListener("click",(()=>{document.querySelector(".header-nav").classList.toggle("header-nav_active"),t.classList.toggle("menu__img-active")}))})(),m(),(e=>{const t=u(),n=document.querySelector(".btn-cart__count");t?(n.textContent=t,n.style.backgroundColor="#ffffff"):(n.textContent=t,n.style.backgroundColor="transparent"),e&&(document.querySelector(".cart__count").textContent=t,document.querySelector(".span__count").textContent=t)})()}();