/******/ (function() { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ 903:
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "dS": function() { return /* binding */ loadArticle; },
  "cM": function() { return /* binding */ loadAuthor; },
  "Nz": function() { return /* binding */ loadPosts; }
});

;// CONCATENATED MODULE: ./src/script/modules/createElementsBlog.js

// ===================== BLOG ==========================

const headerPage = document.querySelector('.header');
// const footerPage = document.querySelector('.footer');
const mainPage = document.querySelector('main');
const createSection = () => {
  const section = document.createElement('section');
  section.classList.add('section', 'container');
  return section;
};
const createUl = () => {
  const ul = document.createElement('ul');
  ul.classList.add('blog');
  return ul;
};
const createPost = ({
  title,
  id
}) => {
  const li = document.createElement('li');
  li.classList.add('blog-item');

  // const linkPost = `article.html?id=${id}`;
  li.insertAdjacentHTML('afterbegin', `
        <a class="blog-item__link" href="article.html?id=${id}" target="_blank">

        <picture>
          <source srcset="assets/images/Rectangle.avif" type="image/avif">
          <source srcset="assets/images/Rectangle.webp" type="image/webp">
          <img class="blog-item__image" src="./assets/images/Rectangle.jpg" alt="">
        </picture>

          
        </a> 
        <div class="blog-item__content">
          <a class="blog-item__link" href="article.html?id=${id}" target="_blank">
            <h2 class="blog-item__title">${title}</h2>
          </a>

          <div class="info">
          <span class="info__date">22 октября 2021, 12:45</span>
          <div class="info-wrap">
            <div class="info__view">
              <span class="info__img info__img_view"></span>
              <p class="info__count">1.2K</p>              
            </div>
            <div class="info__comments">
              <span class="info__img info__img_comments"></span>
              <p class="info__count">0</p>              
            </div>
          </div>
          </div>          

        </div>  
      `);
  return li;
};
const renderPost = postList => {
  const data = postList.map(post => createPost(post));
  return data;
};

// ================  PAGINATION  ========================
const createPaginationWrap = () => {
  const paginationWrap = document.createElement('div');
  paginationWrap.classList.add('pagination');
  paginationWrap.insertAdjacentHTML('afterbegin', `    
        <a class="arrow arrow_left"></a>
        <div class="pagination-group">
        </div>
        <a class="arrow arrow_right"></a>    
      `);
  return paginationWrap;
};
const createPaginationNumber = (paginationWrap, currentPage, startPage) => {
  startPage ||= currentPage;
  const pagination = paginationWrap.querySelector('.pagination-group');
  pagination.innerHTML = '';
  const pages = [];
  for (let i = startPage; i < startPage + 3; i++) {
    const link = document.createElement('a');
    link.className = 'pagination__page';
    if (i === currentPage) {
      link.classList.add('active');
    }
    link.setAttribute('data-number', `${i}`);
    link.href = `blog.html?page=${i}`;
    link.textContent = i;
    pages.push(link);
  }
  pagination.append(...pages);
  return pagination;
};
const createBlogPage = (postList, currentPage) => {
  const section = createSection();
  const blog = createUl();
  blog.append(...renderPost(postList.data));
  section.append(blog);
  const breadcrumb = document.createElement('div');
  breadcrumb.classList.add('bread');
  breadcrumb.insertAdjacentHTML('afterbegin', `<ul class="nav-breadcrumb">
          <li class="nav-breadcrumb__li">
            <a class="nav-breadcrumb__main" href="index.html">Главная</a>
          </li>
          <li class="nav-breadcrumb__li">
            <a class="goBlog" href="blog.html">Блог</a>
          </li>           
        </ul>
      `);
  headerPage.append(breadcrumb);
  const paginationWrap = createPaginationWrap();
  const pagination = createPaginationNumber(paginationWrap, currentPage);
  section.append(paginationWrap);
  mainPage.append(section);
  return {
    pagination
  };
};

// ============  ARTICLE ================
const articleWrap = document.createElement('div');
articleWrap.classList.add('articleWrap', 'container');
const createHeader = title => {
  const breadcrumb = document.createElement('div');
  breadcrumb.classList.add('bread');
  breadcrumb.insertAdjacentHTML('afterbegin', `<ul class="nav-breadcrumb">
          <li class="nav-breadcrumb__li">
            <a class="nav-breadcrumb__main" href="index.html">Главная</a>
          </li>
          <li class="nav-breadcrumb__li">
            <a class="goBlog" href="blog.html">Блог</a>
          </li>
          <li class="nav-breadcrumb__li nav-breadcrumb__title">${title}
          </li>      
        </ul>
      `);
  return breadcrumb;
};
const createMain = (title, body) => {
  const section = document.createElement('section');
  section.insertAdjacentHTML('afterbegin', `
        <article class="article">
          <h1 class="title article__title">${title}</h1>
          <p class="article__text">${body}</p>
        </article>
      `);
  return section;
};
const createAside = () => {
  const aside = document.createElement('aside');
  aside.className = 'aside';
  aside.insertAdjacentHTML('afterbegin', `
        <img src="assets/images/add.jpg" alt="" class="article__img">
        <img src="assets/images/add.jpg" alt="" class="article__img">
      `);
  return aside;
};
const createFooter = author => {
  const nameAuthor = author.data.name || '';
  const footer = document.createElement('footer');
  footer.classList.add('footer-article');
  footer.insertAdjacentHTML('afterbegin', `
        <a class="footer-article__back" href="blog.html">К списку статей</a>
          <div class="footer-article__about">
          <div class="footer-article__author">
            ${nameAuthor}
          </div>

          <div class="info info_article">
          <span class="info__date">22 октября 2021, 12:45</span>
          <div class="info-wrap">
            <div class="info__view">
              <span class="info__img info__img_view"></span>
              <p class="info__count">1.2K</p>              
            </div>
            <div class="info__comments">
              <span class="info__img info__img_comments"></span>
              <p class="info__count">0</p>              
            </div>
          </div>
          </div> 
          
        </div>
      `);
  // const main = document.querySelector('.main');
  // mainPage.append(footer);
  articleWrap.append(footer);
};
const createArticlePage = articleData => {
  const {
    title,
    body,
    user_id
  } = articleData;
  const header = createHeader(title);
  const section = createMain(title, body);
  const aside = createAside();
  loadAuthor(user_id);

  // console.log('footer: ', footer);

  articleWrap.append(aside, section);
  headerPage.append(header);
  mainPage.append(articleWrap);
};

;// CONCATENATED MODULE: ./src/script/modules/paginationFunc.js

const getStartPage = pagination => +pagination.firstElementChild.dataset.number;
const changePageNumber = (paginationWrap, startPage, currentPage, arrowDirect) => {
  if (arrowDirect === 'left') {
    if (startPage <= 1) {
      createPaginationNumber(paginationWrap, currentPage, 1);
    } else {
      createPaginationNumber(paginationWrap, currentPage, startPage - 1);
    }
  } else {
    createPaginationNumber(paginationWrap, currentPage, startPage + 1);
  }
};
const onClickArrow = queryParams => {
  const paginationWrap = document.querySelector('.pagination');
  const pagination = document.querySelector('.pagination-group');
  paginationWrap.addEventListener('click', e => {
    if (e.target.closest('.arrow_left')) {
      e.preventDefault();
      const startPage = getStartPage(pagination);
      const currentPage = +queryParams.slice(6);
      changePageNumber(paginationWrap, startPage, currentPage, 'left');
    }
    if (e.target.closest('.arrow_right')) {
      e.preventDefault();
      const startPage = getStartPage(pagination);
      const currentPage = +queryParams.slice(6);
      changePageNumber(paginationWrap, startPage, currentPage, 'right');
    }
  });
};

;// CONCATENATED MODULE: ./src/script/modules/fetch.js


const loadPosts = async currentPage => {
  // document.body.innerHTML = '';

  const url = new URL(window.location);
  const queryParams = url.search;
  currentPage = +queryParams.slice(6) || 1;
  const response = await fetch(`https://gorest.co.in/public-api/posts${queryParams}`);
  const postList = await response.json();
  createBlogPage(postList, currentPage);
  onClickArrow(queryParams);
};
const loadArticle = async () => {
  const url = new URL(window.location);
  const queryParams = url.search.slice(4);
  const response = await fetch(`https://gorest.co.in/public-api/posts/${queryParams}`);
  const articleData = await response.json();
  createArticlePage(articleData.data);
};
const loadAuthor = async userID => {
  const response = await fetch(`https://gorest.co.in/public-api/users/${userID}`);
  const author = await response.json();
  createFooter(author);
};


/***/ }),

/***/ 321:
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Od": function() { return /* binding */ getCategoryLink; },
/* harmony export */   "lC": function() { return /* binding */ loadPageCategory; },
/* harmony export */   "lE": function() { return /* binding */ makeMenu; }
/* harmony export */ });
// import { notify } from "browser-sync";

const fetchGoods = async url => {
  const response = await fetch(url);
  const data = await response.json();
  return data;
};
const createMenuItem = item => {
  const liItem = document.createElement('li');
  liItem.className = 'sublist__item';
  const link = document.createElement('a');
  link.className = 'sublist__link';
  link.textContent = item;
  link.href = `category.html`;
  liItem.append(link);
  return liItem;
};
const makeMenu = async () => {
  console.log('++++++++++++++++++++++++');
  const url = 'https://determined-painted-hawthorn.glitch.me/api/category';
  const categoriesData = await fetchGoods(url);
  console.log(categoriesData);
  const catalogeHeader = document.querySelector('.header .sublist_catalog');
  const catalogeFooter = document.querySelector('.footer .sublist_catalog');
  const dataLiHeader = categoriesData.map(item => createMenuItem(item));
  const dataLiFooter = categoriesData.map(item => createMenuItem(item));
  catalogeHeader.append(...dataLiHeader);
  catalogeFooter.append(...dataLiFooter);
};
const createSectionTitle = category => {
  const title = document.createElement('h1');
  title.className = 'category__title';
  title.textContent = category;
  return title;
};
const createCategoryItem = (title, price, image, discount) => {
  const li = document.createElement('li');
  li.className = 'benefit__item card';
  if (image === 'notimage.jpg') {
    console.log('NO');
  }
  li.insertAdjacentHTML('afterbegin', `<a class="benefit__link" href="">
          <div class="card-img__wrapper">          
              <img loading="lazy" class="card__img" src='https://determined-painted-hawthorn.glitch.me/${image}' width="420" height="295">                    
          </div>
          <div class="card__price">
            <span class="card__sale-price">${price} ₽</span>            
          </div>
          <p class="card__title">${title}</p>
        </a>
      `);
  if (discount) {
    const spanSale = document.createElement('span');
    spanSale.className = 'card__sale';
    // spanSale.aria-label = 'Скидка';
    spanSale.textContent = `-${discount}%`;
    const cardImgWrapper = li.querySelector('.card-img__wrapper');
    cardImgWrapper.append(spanSale);
    const spanPriceStart = document.createElement('span');
    spanPriceStart.className = 'card__start-price';
    spanPriceStart.textContent = `${price} ₽`;
    const cardPrice = li.querySelector('.card__price');
    cardPrice.firstElementChild.textContent = price * (100 - discount) / 100 + '₽';
    cardPrice.append(spanPriceStart);
  }
  return li;
};
const createCategoryList = categoriesData => {
  const categoriesItem = categoriesData.map(({
    title,
    price,
    image,
    discount
  }) => createCategoryItem(title, price, image, discount));
  const ul = document.createElement('ul');
  ul.className = 'benefit__list';
  ul.append(...categoriesItem);
  return ul;
};
const loadPageCategory = async () => {
  const category = decodeURI(document.location.hash.slice(1));
  const categorySection = document.querySelector('.category__container');
  categorySection.innerHTML = '';
  const url = `https://determined-painted-hawthorn.glitch.me/api/goods/category/${category}`;
  const categoriesData = await fetchGoods(url);
  const title = createSectionTitle(category);
  const categoryList = createCategoryList(categoriesData);
  categorySection.append(title, categoryList);
};
const getCategoryLink = () => {
  const catalog = document.querySelectorAll('.sublist_catalog');
  catalog.forEach(elem => {
    elem.addEventListener('click', e => {
      if (e.target.classList.contains('sublist__link')) {
        e.preventDefault();
        const target = e.target;
        const hash = target.textContent;
        const url = new URL(document.location);
        url.pathname = `category.html`;
        url.hash = hash;
        window.open(url);
        loadPageCategory();
      }
    });
  });
};


/***/ }),

/***/ 64:
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "m": function() { return /* binding */ showNavigation; },
/* harmony export */   "t": function() { return /* binding */ showHeaderMenu; }
/* harmony export */ });
const showNavigation = () => {
  const navFooter = document.querySelector('.navFooter');
  const navTitleCatalog = navFooter.querySelector('.nav__item_catalog').firstElementChild;
  const navTitleBuyer = navFooter.querySelector('.nav__item_buyer').firstElementChild;
  const catalog = navFooter.querySelector('.sublist_catalog');
  const buyer = navFooter.querySelector('.sublist_buyer');
  navTitleCatalog.addEventListener('click', () => {
    catalog.classList.toggle('sublist_show');
    const btnCatalog = navTitleCatalog.querySelector('.nav__btn');
    btnCatalog.classList.toggle('nav__btn_open');
  });
  navTitleBuyer.addEventListener('click', () => {
    buyer.classList.toggle('sublist_show');
    const btnBuyer = navTitleBuyer.querySelector('.nav__btn');
    btnBuyer.classList.toggle('nav__btn_open');
  });
};
const showHeaderMenu = () => {
  const menuBtn = document.querySelector('.menu');
  menuBtn.addEventListener('click', () => {
    document.querySelector('.header-nav').classList.toggle('header-nav_active');
  });
};

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	!function() {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = function(exports, definition) {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	!function() {
/******/ 		__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }
/******/ 	}();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other entry modules.
!function() {

;// CONCATENATED MODULE: ./src/script/modules/createElements.js
const getTimeInner = timeDuration => {
  console.log('++++');
  timeDuration.insertAdjacentHTML('afterbegin', ` <p class="time__title">
      До конца акции:
    </p>
    <div class="time__duration">
      <div class="time__show time__show_days">
        <p class="time__digital digital__day"></p>
      <p class="time__alpha alpha__day"></p>
      </div>
      <div class="time__show time__show_hours">
        <p class="time__digital digital__hour"></p>
        <p class="time__alpha alpha__hour"></p>
      </div>
      <div class="time__show time__show_minutes">
        <p class="time__digital digital__minute"></p>
        <p class="time__alpha alpha__minute"></p>
      </div>
      <div class="time__show time__show_seconds">
        <p class="time__digital digital__second"></p><p class="time__alpha alpha__second"></p>
      </div>                        
    </div> `);
  return timeDuration;
};

;// CONCATENATED MODULE: ./src/script/modules/getNames.js
const getNameDays = days => {
  if (days % 10 === 1 && days !== 11) {
    return 'день';
  } else if ((days % 10 === 2 || days % 10 === 3 || days % 10 === 4) && (days <= 5 || days >= 20)) {
    return 'дня';
  } else {
    return 'дней';
  }
};
const getNameHours = hours => {
  if (hours === 1 || hours === 21) {
    return 'час';
  } else if (hours >= 5 && hours <= 20 || hours % 10 === 0) {
    return 'часов';
  } else {
    return 'часа';
  }
};
const getNameMinutes = minutes => {
  if (minutes % 10 === 1 && minutes !== 11) {
    return 'минута';
  } else if ((minutes % 10 === 2 || minutes % 10 === 3 || minutes % 10 === 4) && (minutes <= 5 || minutes >= 20)) {
    return 'минуты';
  } else {
    return 'минут';
  }
};
const getNameSeconds = seconds => {
  if (seconds % 10 === 1 && seconds !== 11) {
    return 'секунда';
  } else if ((seconds % 10 === 2 || seconds % 10 === 3 || seconds % 10 === 4) && (seconds <= 5 || seconds >= 20)) {
    return 'секунды';
  } else {
    return 'секунд';
  }
};

;// CONCATENATED MODULE: ./src/script/modules/functionTimer.js

const getDeadline = timeDuration => new Date(timeDuration.dataset.timerDeadline).getTime();
const getTimeRemaining = timeRemaining => {
  const seconds = Math.trunc(timeRemaining % 60);
  const minutes = Math.trunc(timeRemaining / 60 % 60);
  const hours = Math.trunc(timeRemaining / 60 / 60 % 24);
  const days = Math.trunc(timeRemaining / 60 / 60 / 24);
  return {
    seconds,
    minutes,
    hours,
    days
  };
};
const isShowDaysOrSeconds = timeRemaining => {
  const timeShowSeconds = document.querySelector('.time__show_seconds');
  const timeShowDays = document.querySelector('.time__show_days');
  if (timeRemaining <= 24 * 60 * 60) {
    timeShowDays.classList.add('display_invisible');
    timeShowSeconds.classList.remove('display_invisible');
  } else {
    timeShowDays.classList.remove('display_invisible');
    timeShowSeconds.classList.add('display_invisible');
  }
};
const isTimerFinished = (timeRemaining, setIntervalId) => {
  if (timeRemaining <= 0) {
    const bannerTime = document.querySelector('.banner__time');
    clearInterval(setIntervalId);
    bannerTime.classList.add('display_invisible');
  }
};
const timerStart = deadline => {
  const timeZoneOffset = new Date().getTimezoneOffset() * 60 * 1000;
  const digitalDay = document.querySelector('.digital__day');
  const digitalHour = document.querySelector('.digital__hour');
  const digitalMinute = document.querySelector('.digital__minute');
  const digitalSecond = document.querySelector('.digital__second');
  const alphaDay = document.querySelector('.alpha__day');
  const alphaHour = document.querySelector('.alpha__hour');
  const alphaMinute = document.querySelector('.alpha__minute');
  const alphaSecond = document.querySelector('.alpha__second');
  const setIntervalId = setInterval(() => {
    const now = Date.now() + timeZoneOffset;
    const timeRemaining = (deadline - now) / 1000;
    const timer = getTimeRemaining(timeRemaining);
    const {
      seconds,
      minutes,
      hours,
      days
    } = timer;
    alphaDay.textContent = getNameDays(days);
    alphaHour.textContent = getNameHours(hours);
    alphaMinute.textContent = getNameMinutes(minutes);
    alphaSecond.textContent = getNameSeconds(seconds);
    digitalDay.textContent = String(days).padStart(2, '0');
    digitalHour.textContent = String(hours).padStart(2, '0');
    digitalMinute.textContent = String(minutes).padStart(2, '0');
    digitalSecond.textContent = String(seconds).padStart(2, '0');
    isShowDaysOrSeconds(timeRemaining);
    isTimerFinished(timeRemaining, setIntervalId);
  }, 1000);
};

// EXTERNAL MODULE: ./src/script/modules/showNavigation.js
var showNavigation = __webpack_require__(64);
// EXTERNAL MODULE: ./src/script/modules/fetchCategories.js
var fetchCategories = __webpack_require__(321);
;// CONCATENATED MODULE: ./src/script/index.js




const initTimer = () => {
  const timeDuration = document.querySelector('[data-timer-deadline]');
  if (timeDuration) {
    getTimeInner(timeDuration);
    const deadline = getDeadline(timeDuration);
    timerStart(deadline);
  }
  (0,showNavigation/* showNavigation */.m)();
  (0,showNavigation/* showHeaderMenu */.t)();
  (0,fetchCategories/* makeMenu */.lE)();
  (0,fetchCategories/* getCategoryLink */.Od)();
};
initTimer();
}();
// This entry need to be wrapped in an IIFE because it need to be isolated against other entry modules.
!function() {
/* harmony import */ var _modules_fetch_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(903);
/* harmony import */ var _modules_showNavigation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(64);


const init = () => {
  (0,_modules_fetch_js__WEBPACK_IMPORTED_MODULE_0__/* .loadPosts */ .Nz)();
  (0,_modules_showNavigation_js__WEBPACK_IMPORTED_MODULE_1__/* .showNavigation */ .m)();
  (0,_modules_showNavigation_js__WEBPACK_IMPORTED_MODULE_1__/* .showHeaderMenu */ .t)();
};
init();
}();
// This entry need to be wrapped in an IIFE because it need to be isolated against other entry modules.
!function() {
/* harmony import */ var _modules_fetch_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(903);
/* harmony import */ var _modules_showNavigation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(64);


const init = () => {
  (0,_modules_fetch_js__WEBPACK_IMPORTED_MODULE_0__/* .loadArticle */ .dS)();
  (0,_modules_showNavigation_js__WEBPACK_IMPORTED_MODULE_1__/* .showNavigation */ .m)();
  (0,_modules_showNavigation_js__WEBPACK_IMPORTED_MODULE_1__/* .showHeaderMenu */ .t)();
};
init();
}();
// This entry need to be wrapped in an IIFE because it need to be isolated against other entry modules.
!function() {
/* harmony import */ var _modules_showNavigation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(64);

const init = () => {
  (0,_modules_showNavigation_js__WEBPACK_IMPORTED_MODULE_0__/* .showNavigation */ .m)();
  (0,_modules_showNavigation_js__WEBPACK_IMPORTED_MODULE_0__/* .showHeaderMenu */ .t)();
};
init();
}();
// This entry need to be wrapped in an IIFE because it need to be isolated against other entry modules.
!function() {
/* harmony import */ var _modules_fetchCategories_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(321);
/* harmony import */ var _modules_showNavigation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(64);


const init = () => {
  (0,_modules_showNavigation_js__WEBPACK_IMPORTED_MODULE_0__/* .showNavigation */ .m)();
  (0,_modules_showNavigation_js__WEBPACK_IMPORTED_MODULE_0__/* .showHeaderMenu */ .t)();
  (0,_modules_fetchCategories_js__WEBPACK_IMPORTED_MODULE_1__/* .loadPageCategory */ .lC)();
};
init();
}();
/******/ })()
;